{"version":3,"sources":["index.js"],"names":[],"mappings":"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","file":"main.min.js","sourcesContent":["window.addEventListener('load', init);\n\nfunction init() {\n    var html = $('html');\n    var body = $('body');\n    var isTouchScreen = function() {\n        return 'ontouchstart' in document.documentElement;\n    };\n    var defaultEvent = isTouchScreen() ? {\n        click: 'touchend',\n    } : {\n        click: 'click',\n    };\n    // header\n    var headerNav = $('.header').find('.nav-list');\n    var inner = $('li.each-block');\n    var timeAfterActive;\n    var pageString = '#page';\n\n    refreshIndex(inner);\n    $(window).on('hashchange', function() {\n        refreshIndex(inner);\n    });\n    inner.each(function(index) {\n        $(this).on(defaultEvent.click, function() {\n\n            if ($(this).hasClass('active')) {\n                // collapsePage(inner);\n            } else {\n                clearTimeout(timeAfterActive);\n                window.location.hash = pageString + (index + 1);\n            }\n        });\n    });\n\n    headerNav.find('.each-nav').each(function(index) {\n        $(this).on(defaultEvent.click, function() {\n\n            window.location.hash = pageString + (index + 1);\n        });\n    });\n\n    $('.back-index').on(defaultEvent.click, function() {\n        window.location.hash = '';\n        collapsePage(inner);\n    });\n\n\n    // $.pjax({\n    //     selector: 'a[data-pjax=1]',\n    //     container: '.pages .view-center.page1',\n    //     show: 'fade',\n    //     cache: true,\n    //     storage: true,\n    //     titleSuffix: '',\n    //     filter: function(){},\n    //     callback: function(){}\n    // });\n\n    // refresh\n    function refreshIndex(inner) {\n        var hash = window.location.hash;\n        if (/#page/.test(hash)) {\n            var index = hash.substring(5) - 1;\n            collapsePage(inner, true);\n            expandPage(inner, inner.eq(index));\n            sliderNav(index);\n        }\n        if (window.location.pathname === '/' && hash === '') {\n            collapsePage(inner);\n        }\n    }\n\n    // expand\n    function expandPage(inner, obj) {\n        inner.addClass('has-one-active');\n        obj.addClass('active');\n        obj.removeClass('has-one-active');\n\n        timeAfterActive = setTimeout(function() {\n            obj.addClass('after-active');\n            var header = $('header.header');\n            if (!header.hasClass('active')) {\n                header.addClass('active');\n            }\n        }, 500);\n    }\n        // collapse\n    function collapsePage(inner, head) {\n        if (!$('header.header').hasClass('active')) {\n            return;\n        }\n        if (!head) {\n            $('header.header').removeClass('active');\n        }\n        $('li.each-block.active').removeClass('after-active active');\n        inner.removeClass('has-one-active');\n    }\n\n    // slider nav\n    function sliderNav(index) {\n        var eachNav = headerNav.find('.each-nav');\n        eachNav.each(function() {\n            if ($(this).hasClass('active')) {\n                $(this).removeClass('active');\n            }\n        });\n        eachNav.eq(index).addClass('active');\n        body.attr('class', 'page-' + (index + 1));\n    }\n\n\n    $.fn.extend({\n        swipe: function(direction, callback) {\n            if (this === []) {\n                return this;\n            }\n            this.each(function() {\n                var touchObj = this;\n                var x1 = null,\n                    x2 = null,\n                    y1 = null,\n                    y2 = null;\n                var changeWidth = 50, changeHeight = 50;\n                touchObj.addEventListener('touchstart', function(event) {\n                    if (event.touches.length == 1) {\n                        var touch = event.touches[0];\n                        x1 = touch.pageX;\n                        x2 = touch.pageX;\n                        y1 = touch.pageY;\n                        y2 = touch.pageY;\n                    }\n                });\n                touchObj.addEventListener('touchmove', function(event) {\n                    if (event.touches.length == 1) {\n                        var touch = event.touches[0];\n                        x2 = touch.pageX;\n                        y2 = touch.pageY;\n                    }\n                });\n                touchObj.addEventListener('touchend', function(event) {\n                    // left and right\n                    if (x1 !== null && Math.abs(y2 - y1) < changeHeight ) {\n                        if (x2 - x1 > changeWidth) {\n                            if (direction === undefined) {\n                                $(touchObj).trigger('swipeRight');\n                            }\n                            if (direction === 'right') {\n                                callback();\n                            }\n\n                        } else if (x1 - x2 > changeWidth) {\n                            if (direction === undefined) {\n                                $(touchObj).trigger('swipeLeft');\n                            }\n                            if (direction === 'left') {\n                                callback();\n                            }\n                        }\n                    }\n                    // top and bottom\n                    if (x1 !== null && Math.abs(x2 - x1) < changeWidth ) {\n                        if (y2 - y1 > changeHeight) {\n                            if (direction === undefined) {\n                                $(touchObj).trigger('swipeTop');\n                            }\n                            if (direction === 'top') {\n                                callback();\n                            }\n\n                        } else if (y1 - y2 > changeHeight) {\n                            if (direction === undefined) {\n                                $(touchObj).trigger('swipeBottom');\n                            }\n                            if (direction === 'bottom') {\n                                callback();\n                            }\n                        }\n                    }\n                    x1 = null;\n                    x2 = null;\n                    y1 = null;\n                    y2 = null;\n                });\n            });\n            return this;\n        }\n    });\n    \n    /*way 1*/\n    $('.pages').swipe().on({\n        swipeLeft: function() {\n            swipePage('next');\n        }, swipeRight: function() {\n            swipePage('prev');\n        }\n    });\n    /*way 2*/\n    /*$('.pages').swipe('left', function(){\n        swipePage('next');\n    }).swipe('right', function() {\n        swipePage('prev');\n    });*/\n    $('.pages').each(function() {\n        this.addEventListener('gestureend', function(event) {\n            if (event.scale < 1) {\n                collapsePage(inner);\n            }\n        });\n    });\n    \n    function swipePage(direction) {\n        var num = headerNav.find('.each-nav').length;\n        var curr = body.attr('class').slice(5) - 1;\n        var prev = curr - 1 >= 0 ? curr - 1 : num - 1;\n        var next = curr + 1 <= num - 1 ? curr + 1 : 0;\n        var hash = window.location.hash;\n        if (direction === 'prev') {\n            hash = pageString + (prev + 1);\n        } else if (direction === 'next') {\n            hash = pageString + (next + 1);\n        }\n    }\n}\n"],"sourceRoot":"/source/"}