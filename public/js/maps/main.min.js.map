{"version":3,"sources":["index.js"],"names":[],"mappings":"AAEA,QAAA,QA0CA,QAAA,GAAA,EAAA,EAAA,GACA,EAAA,SAAA,kBACA,EAAA,SAAA,UACA,EAAA,YAAA,kBAEA,EAAA,WAAA,WACA,EAAA,SAAA,gBACA,GACA,EAAA,iBAAA,SAAA,WAEA,KAGA,QAAA,GAAA,EAAA,GACA,EAAA,iBAAA,SAAA,YAGA,GACA,EAAA,iBAAA,YAAA,UAEA,EAAA,wBAAA,YAAA,uBACA,EAAA,YAAA,mBAIA,QAAA,GAAA,GACA,GAAA,GAAA,EAAA,KAAA,YACA,GAAA,KAAA,WACA,EAAA,MAAA,SAAA,WACA,EAAA,MAAA,YAAA,YAGA,EAAA,GAAA,GAAA,SAAA,UACA,EAAA,KAAA,QAAA,SAAA,EAAA,IA6CA,QAAA,GAAA,GACA,GAAA,GAAA,EAAA,KAAA,aAAA,OACA,EAAA,EAAA,KAAA,SAAA,MAAA,GAAA,EACA,EAAA,EAAA,GAAA,EAAA,EAAA,EAAA,EAAA,EACA,EAAA,EAAA,GAAA,EAAA,EAAA,EAAA,EAAA,CACA,UAAA,EACA,EAAA,KAAA,aAAA,GAAA,GAAA,QAAA,EAAA,OACA,SAAA,GACA,EAAA,KAAA,aAAA,GAAA,GAAA,QAAA,EAAA,OA/HA,GAaA,GAZA,GADA,EAAA,QACA,EAAA,SACA,EAAA,WACA,MAAA,gBAAA,UAAA,iBAEA,EAAA,KACA,MAAA,aAEA,MAAA,SAGA,EAAA,EAAA,WAAA,KAAA,aACA,EAAA,EAAA,gBAEA,GAAA,KAAA,SAAA,GACA,EAAA,MAAA,GAAA,EAAA,MAAA,WAEA,EAAA,MAAA,SAAA,YAGA,aAAA,GACA,EAAA,EAAA,EAAA,OAEA,EAAA,QAKA,EAAA,KAAA,aAAA,KAAA,SAAA,GACA,EAAA,MAAA,GAAA,EAAA,MAAA,WAEA,EAAA,GAAA,GACA,EAAA,EAAA,EAAA,GAAA,IAAA,GACA,EAAA,OAIA,EAAA,eAAA,GAAA,EAAA,MAAA,WACA,EAAA,IAyCA,IAAA,GAAA,EAAA,UACA,EAAA,EACA,GAAA,KAAA,WACA,GAAA,GAAA,IAEA,GAAA,iBAAA,aAAA,SAAA,GACA,EAAA,MAAA,GACA,EAAA,IAGA,IAAA,GAAA,KAAA,EAAA,IACA,GAAA,iBAAA,aAAA,SAAA,GACA,GAAA,GAAA,EAAA,QAAA,OAAA,CACA,GAAA,GAAA,EAAA,QAAA,EACA,GAAA,EAAA,MACA,EAAA,EAAA,SAGA,EAAA,iBAAA,YAAA,SAAA,GACA,GAAA,GAAA,EAAA,QAAA,OAAA,CACA,GAAA,GAAA,EAAA,QAAA,EACA,GAAA,EAAA,SAGA,EAAA,iBAAA,WAAA,WACA,OAAA,IACA,EAAA,EAAA,GACA,QAAA,IAAA,QACA,EAAA,SACA,EAAA,EAAA,GACA,EAAA,SAGA,EAAA,KACA,EAAA,SApHA,OAAA,iBAAA,OAAA","file":"main.min.js","sourcesContent":["window.addEventListener('load', init);\n\nfunction init() {\n    var html = $('html');\n    var body = $('body');\n    var isTouchScreen = function() {\n        return 'ontouchstart' in document.documentElement;\n    };\n    var defaultEvent = isTouchScreen() ? {\n        click: 'touchend',\n    } : {\n        click: 'click',\n    };\n    // header\n    var headerNav = $('.header').find('.nav-list');\n    var inner = $('li.each-block');\n    var timeAfterActive;\n    inner.each(function(index) {\n        $(this).on(defaultEvent.click, function() {\n            \n            if ($(this).hasClass('active')) {\n                // collapsePage(inner);\n            } else {\n                clearTimeout(timeAfterActive);\n                expandPage(inner, $(this));\n\n                sliderNav(index);\n            }\n        });\n    });\n    \n    headerNav.find('.each-nav').each(function(index) {\n        $(this).on(defaultEvent.click, function() {\n\n            collapsePage(inner, true);\n            expandPage(inner, inner.eq(index), true);\n            sliderNav(index);\n        });\n    });\n\n    $('.back-index').on(defaultEvent.click, function() {\n        collapsePage(inner);\n    });\n    // expand\n    function expandPage(inner, obj, head) {\n        inner.addClass('has-one-active');\n        obj.addClass('active');\n        obj.removeClass('has-one-active');\n        \n        timeAfterActive = setTimeout(function() {\n            obj.addClass('after-active');\n            if (!head) {\n                $('header.header').addClass('active');\n            }\n        }, 500);\n    }\n    // collapse\n    function collapsePage(inner, head) {\n        if (!$('header.header').hasClass('active')) {\n            return;\n        }\n        if (!head) {\n            $('header.header').removeClass('active');\n        }\n        $('li.each-block.active').removeClass('after-active active');\n        inner.removeClass('has-one-active');\n    }\n\n    // slider nav\n    function sliderNav(index) {\n        var eachNav = headerNav.find('.each-nav');\n        eachNav.each(function() {\n            if ($(this).hasClass('active')) {\n                $(this).removeClass('active');\n            }\n        });\n        eachNav.eq(index).addClass('active');\n        body.attr('class', 'page-' + (index + 1));\n    }\n\n\n    // touches\n    var touchObj = $('.pages');\n    var changeWidth = 50;\n    touchObj.each(function() {\n        var touchObj = this;\n\n        touchObj.addEventListener('gestureend', function(event) {\n            if (event.scale < 1) {\n                collapsePage(inner);\n            }\n        });\n        var x = null, y = null;\n        touchObj.addEventListener('touchstart', function(event) {\n            if(event.touches.length == 1){\n                var touch = event.touches[0];\n                x = touch.pageX;\n                y = touch.pageX;\n            }\n        });\n        touchObj.addEventListener('touchmove', function(event) {\n            if(event.touches.length == 1){\n                var touch = event.touches[0];\n                y = touch.pageX;\n            }\n        });\n        touchObj.addEventListener('touchend', function(event) {\n            if (x !== null) {\n                if (y - x > changeWidth) {\n                    console.log('haha')\n                    swipePage('next');\n                } else if (x - y > changeWidth) {\n                    swipePage('prev');\n                }\n            }\n            x = null;\n            y = null;\n        });\n\n    });\n    \n\n    function swipePage(direction) {\n        var num = headerNav.find('.each-nav').length;\n        var curr = body.attr('class').slice(5)-1;\n        var prev = curr - 1 >= 0 ? curr - 1 : num - 1;\n        var next = curr + 1 <= num -1 ? curr + 1 : 0;\n        if (direction === 'prev') {\n            headerNav.find('.each-nav').eq(prev).trigger(defaultEvent.click);\n        } else if (direction === 'next') {\n            headerNav.find('.each-nav').eq(next).trigger(defaultEvent.click);\n        }\n    }\n}"],"sourceRoot":"/source/"}